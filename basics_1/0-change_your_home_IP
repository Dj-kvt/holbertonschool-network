#!/usr/bin/env bash
# Script that changes localhost and facebook.com IP resolution in /etc/hosts

# Vérifie si l'utilisateur est root
if [ "$EUID" -ne 0 ]; then
  echo "Please run as root"
  exit 1
fi

# Sauvegarde du fichier original
cp /etc/hosts /etc/hosts.bak

# Crée un nouveau fichier temporaire
temp_hosts=$(mktemp)

# Copie uniquement les lignes qui ne contiennent pas localhost ou facebook.com
grep -v -E 'localhost|facebook\.com' /etc/hosts > "$temp_hosts"

# Ajoute les nouvelles résolutions
echo "127.0.0.2 localhost" >> "$temp_hosts"
echo "8.8.8.8 facebook.com" >> "$temp_hosts"

# Remplace le fichier /etc/hosts
cp "$temp_hosts" /etc/hosts

# Nettoyage
rm "$temp_hosts"
