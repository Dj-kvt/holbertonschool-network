#!/usr/bin/env bash
# Script that changes localhost and facebook.com IP resolution in /etc/hosts

# Vérifie si l'utilisateur est root
if [ "$EUID" -ne 0 ]; then
  echo "Please run as root"
  exit 1
fi

# Sauvegarde du fichier /etc/hosts
cp /etc/hosts /etc/hosts.bak

# Supprime les lignes existantes pour localhost ou facebook.com s'il y en a
sed -i '/127\.0\.0\.2\s\+localhost/d' /etc/hosts
sed -i '/8\.8\.8\.8\s\+facebook\.com/d' /etc/hosts
sed -i '/localhost/d' /etc/hosts
sed -i '/facebook\.com/d' /etc/hosts

# Ajoute les nouvelles résolutions
echo "127.0.0.2 localhost" >> /etc/hosts
echo "8.8.8.8 facebook.com" >> /etc/hosts
